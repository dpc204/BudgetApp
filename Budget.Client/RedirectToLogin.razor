@inject NavigationManager NavigationManager

@code {
    protected override void OnInitialized()
    {
        var returnUrl = Uri.EscapeDataString(NavigationManager.Uri);
        var loginUrl = $"Account/Login?returnUrl={returnUrl}";
        
        // Check if we're already on the login page to prevent redirect loops
        if (!NavigationManager.Uri.Contains("/Account/Login"))
        {
            NavigationManager.NavigateTo(loginUrl);
        }
    }
}