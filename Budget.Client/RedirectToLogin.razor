@inject NavigationManager NavigationManager

@code {
    protected override void OnInitialized()
    {
        var currentUri = NavigationManager.ToAbsoluteUri(NavigationManager.Uri);
        
        // Check if we're already on the login page to prevent redirect loops
        if (currentUri.AbsolutePath.Contains("/Account/Login", StringComparison.OrdinalIgnoreCase))
        {
            return;
        }
        
        var returnUrl = Uri.EscapeDataString(NavigationManager.Uri);
        var loginUrl = $"/Account/Login?returnUrl={returnUrl}";
        
        NavigationManager.NavigateTo(loginUrl);
    }
}